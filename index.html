<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Staff SKTB</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; margin: 0; padding: 20px; }
        .container { background: rgba(255, 255, 255, 0.98); border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); width: 100%; max-width: 500px; padding: 30px 25px; text-align: center; overflow: hidden; }
        #headerDepan { transition: opacity 0.3s ease; }
        .school-logo { width: 100px; height: auto; margin-bottom: 15px; display: block; margin-left: auto; margin-right: auto; }
        h2 { margin-bottom: 5px; color: #333; font-size: 1.1rem; font-weight: 700; line-height: 1.4; text-transform: uppercase; }
        p.subtitle { margin-top: 0; color: #666; font-size: 0.9rem; margin-bottom: 20px; }
        .search-box { position: relative; margin-bottom: 20px; }
        select { width: 100%; padding: 12px 20px; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem; outline: none; background: #fff; appearance: none; -webkit-appearance: none; cursor: pointer; }
        .dropdown-icon { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: #764ba2; pointer-events: none; }
        #resultCard { display: none; text-align: left; }
        .profile-header { text-align: center; margin-bottom: 20px; }
        .profile-img { width: 120px; height: 120px; object-fit: cover; border-radius: 50%; border: 4px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin: 0 auto 10px; background-color: #eee; }
        .teacher-name { font-size: 1.3rem; font-weight: 700; color: #333; margin: 5px 0; line-height: 1.2; }
        .teacher-role { color: #764ba2; font-weight: 600; font-size: 1rem; display: block; }
        .tabs { display: flex; justify-content: space-between; margin-bottom: 15px; background: #f0f2f5; padding: 5px; border-radius: 12px; }
        .tab-btn { flex: 1; padding: 8px 5px; border: none; background: none; font-size: 0.75rem; font-weight: 600; color: #777; cursor: pointer; border-radius: 8px; }
        .tab-btn.active { background: #fff; color: #764ba2; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .info-item { display: flex; align-items: center; margin-bottom: 10px; padding: 12px; background: #f8f9fc; border-radius: 12px; border-left: 4px solid #764ba2; }
        .icon-box { min-width: 35px; height: 35px; background: #e0e7ff; color: #667eea; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-size: 1rem; }
        .info-content small { display: block; color: #888; font-size: 0.7rem; text-transform: uppercase; }
        .info-content span { font-weight: 500; color: #444; font-size: 0.95rem; }
    </style>
</head>
<body>
<div class="container">
    <div id="headerDepan">
        <img src="https://cdn-icons-png.flaticon.com/512/2830/2830302.png" class="school-logo">
        <h2>PORTAL GURU DAN STAFF<br>SEK. KEB. TELOK BEREMBANG</h2>
        <p class="subtitle">Sistem Maklumat Digital</p>
    </div>
    <div class="search-box">
        <select id="namaDropdown" onchange="pilihGuru()">
            <option value="">-- Pilih Nama Guru --</option>
        </select>
        <i class="fas fa-chevron-down dropdown-icon"></i>
    </div>
    <div id="resultCard">
        <div class="profile-header">
            <img id="pGambar" src="" class="profile-img">
            <h3 id="pNama" class="teacher-name">Nama Guru</h3>
            <span id="pJawatan" class="teacher-role">Jawatan</span>
        </div>
        <div class="tabs">
            <button class="tab-btn active" onclick="bukaTab('Info')">Info Am</button>
            <button class="tab-btn" onclick="bukaTab('Kuri')">Kurikulum</button>
            <button class="tab-btn" onclick="bukaTab('HEM')">HEM</button>
            <button class="tab-btn" onclick="bukaTab('Koko')">Koko</button>
        </div>
        <div id="Info" class="tab-content active">
            <div class="info-item"><div class="icon-box"><i class="fas fa-star"></i></div><div class="info-content"><small>Gred</small><span id="pGred">-</span></div></div>
            <div class="info-item"><div class="icon-box"><i class="fas fa-id-badge"></i></div><div class="info-content"><small>ID Delima</small><span id="pIdDelima">-</span></div></div>
        </div>
        <div id="Kuri" class="tab-content">
            <div class="info-item"><div class="icon-box"><i class="fas fa-book-open"></i></div><div class="info-content"><small>Opsyen</small><span id="pOpsyen">-</span></div></div>
        </div>
        <div id="HEM" class="tab-content">
            <div class="info-item"><div class="icon-box"><i class="fas fa-user-shield"></i></div><div class="info-content"><small>Tugas HEM</small><span id="pHEM">-</span></div></div>
        </div>
        <div id="Koko" class="tab-content">
            <div class="info-item"><div class="icon-box"><i class="fas fa-running"></i></div><div class="info-content"><small>Tugas Koko</small><span id="pKoko">-</span></div></div>
        </div>
    </div>
</div>
<script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRsvip67QwGzy2gu0coChpig9r2ZMzw6Hi6kHGnVh4m9woeC8IdZWm76AiT1kS2ugsWT3AIGNnatuBj/pub?output=csv';
    let staffData = [];
    fetch(csvUrl).then(res => res.text()).then(data => {
        const rows = data.split('\n');
        for (let i = 1; i < rows.length; i++) {
            const cols = rows[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
            if (cols.length > 1) staffData.push({ nama: c(cols[0]), jawatan: c(cols[2]), gred: c(cols[3]), opsyen: c(cols[4]), delima: c(cols[5]), tugas: c(cols[6]), foto: c(cols[7]) });
        }
        staffData.sort((a, b) => a.nama.localeCompare(b.nama));
        const dropdown = document.getElementById('namaDropdown');
        staffData.forEach(s => { const opt = document.createElement('option'); opt.value = s.nama; opt.textContent = s.nama; dropdown.appendChild(opt); });
    });
    function c(t) { return t ? t.replace(/^"|"$/g, '').trim() : ''; }
    function pilihGuru() {
        const sel = document.getElementById('namaDropdown').value;
        const res = staffData.find(s => s.nama === sel);
        if (res) {
            document.getElementById('headerDepan').style.display = 'none';
            document.getElementById('resultCard').style.display = 'block';
            document.getElementById('pNama').textContent = res.nama;
            document.getElementById('pJawatan').textContent = res.jawatan;
            document.getElementById('pGred').textContent = res.gred;
            document.getElementById('pIdDelima').textContent = res.delima;
            document.getElementById('pOpsyen').textContent = res.opsyen;
            document.getElementById('pHEM').textContent = res.tugas;
            document.getElementById('pKoko').textContent = res.tugas;
            document.getElementById('pGambar').src = res.foto || 'https://cdn-icons-png.flaticon.com/512/847/847969.png';
            bukaTab('Info');
        }
    }
    function bukaTab(n) {
        const contents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < contents.length; i++) contents[i].classList.remove("active");
        const btns = document.getElementsByClassName("tab-btn");
        for (let i = 0; i < btns.length; i++) btns[i].classList.remove("active");
        document.getElementById(n).classList.add("active");
        if(event) event.currentTarget.classList.add("active");
    }
</script>
</body>
</html>
